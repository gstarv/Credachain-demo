<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creda Chain - Secure Blockchain Payments</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
    <link rel="stylesheet" href="/css/index.css">
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <a href="index.html" class="logo">
                    <div class="logo-icon"></div>
                    <span>Creda Chain</span>
                </a>
                <nav>
                    <ul>
                        <li><a href="index.html" class="active">Home</a></li>
                        <li><a href="#features">Features</a></li>
                        <li><a href="#services">Services</a></li>
                        <li><a href="#security">Security</a></li>
                        <li><a href="#about">About</a></li>
                    </ul>
                </nav>
                <div class="auth-buttons">
                    <div class="wallet-dropdown">
                        <div id="walletContainer">
                            <button id="connectWalletBtn" class="btn btn-primary">
                                <i class="fas fa-wallet"></i> Connect Wallet
                            </button>
                        </div>
                        <div class="wallet-dropdown-content">
                            <a href="login.html"><i class="fas fa-sign-in-alt"></i> Log In</a>
                            <a href="signup.html"><i class="fas fa-user-plus"></i> Sign Up</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Wallet Connection Modal -->
    <div id="walletModal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2 class="modal-title">Connect Your Wallet</h2>
            <p>Select a wallet to connect to Creda Chain</p>
            
            <div class="wallet-options">
                <div class="wallet-option" id="phantomOption">
                    <div class="wallet-icon">
                        <i class="fas fa-ghost"></i>
                    </div>
                    <div class="wallet-info">
                        <div class="wallet-name">Phantom</div>
                        <div class="wallet-desc">Popular Solana wallet</div>
                    </div>
                </div>
                
                <div class="wallet-option" id="solflareOption">
                    <div class="wallet-icon">
                        <i class="fas fa-fire"></i>
                    </div>
                    <div class="wallet-info">
                        <div class="wallet-name">Solflare</div>
                        <div class="wallet-desc">Web-based Solana wallet</div>
                    </div>
                </div>
                
                <div class="wallet-option" id="solletOption">
                    <div class="wallet-icon">
                        <i class="fas fa-coins"></i>
                    </div>
                    <div class="wallet-info">
                        <div class="wallet-name">Sollet</div>
                        <div class="wallet-desc">Browser extension wallet</div>
                    </div>
                </div>
            </div>
            
            <div id="connectionStatus" style="display: none; text-align: center; margin-top: 20px;">
                <div class="spinner"></div>
                <p>Connecting to wallet...</p>
            </div>
        </div>
    </div>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="container">
            <h1>Revolutionizing Payments with Blockchain Technology</h1>
            <p>Creda Chain eliminates failed payments, double transactions, and slow refunds with our secure blockchain infrastructure. Support for Naira and USDT payments.</p>
            
            <!-- Real-time Exchange Rates -->
            <div class="exchange-rate">
                <h4>
                    Live Exchange Rates
                    <span class="live-indicator">LIVE</span>
                </h4>
                <div id="exchangeRates" class="loading">
                    Loading current rates...
                </div>
            </div>
            
            <div class="hero-buttons">
                <button id="getStartedBtn" class="btn btn-primary btn-lg">Get Started</button>
                <a href="#features" class="btn btn-outline btn-lg">Learn More</a>
            </div>
        </div>
    </section>

    <!-- Services Section -->
    <section class="features" id="services">
        <div class="container">
            <div class="section-title">
                <h2>All Your Payments in One Place</h2>
                <p>Complete payment solutions for your everyday needs, powered by secure blockchain technology</p>
            </div>
            
            <div class="services-grid">
                <div class="service-card">
                    <div class="service-icon">
                        <i class="fas fa-mobile-alt"></i>
                    </div>
                    <h3>Airtime Recharge</h3>
                    <p>Instant airtime top-up for all Nigerian networks with best rates and instant delivery.</p>
                    <a href="airtime.html" class="service-link">
                        Recharge Now <i class="fas fa-arrow-right"></i>
                    </a>
                </div>
                
                <div class="service-card">
                    <div class="service-icon">
                        <i class="fas fa-wifi"></i>
                    </div>
                    <h3>Data Recharge</h3>
                    <p>Affordable data plans for MTN, Glo, Airtel, and 9mobile with special bonuses.</p>
                    <a href="data.html" class="service-link">
                        Buy Data <i class="fas fa-arrow-right"></i>
                    </a>
                </div>
                
                <div class="service-card">
                    <div class="service-icon">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <h3>Utilities Payment</h3>
                    <p>Pay electricity bills, water bills, and cable TV subscriptions seamlessly.</p>
                    <a href="utilities.html" class="service-link">
                        Pay Bills <i class="fas fa-arrow-right"></i>
                    </a>
                </div>
                
                <div class="service-card">
                    <div class="service-icon">
                        <i class="fas fa-paper-plane"></i>
                    </div>
                    <h3>Money Transfer</h3>
                    <p>Send money to any bank account or Creda Chain user instantly and securely.</p>
                    <a href="transfer.html" class="service-link">
                        Send Money <i class="fas fa-arrow-right"></i>
                    </a>
                </div>
                
                <div class="service-card">
                    <div class="service-icon">
                        <i class="fas fa-exchange-alt"></i>
                    </div>
                    <h3>USDT to Naira</h3>
                    <p>Convert cryptocurrency to Naira at best market rates with instant settlement.</p>
                    <a href="convert.html" class="service-link">
                        Convert Now <i class="fas fa-arrow-right"></i>
                    </a>
                </div>
                
                <div class="service-card">
                    <div class="service-icon">
                        <i class="fas fa-history"></i>
                    </div>
                    <h3>Transaction History</h3>
                    <p>View and manage all your payment history in one secure, organized place.</p>
                    <a href="transactions.html" class="service-link">
                        View History <i class="fas fa-arrow-right"></i>
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Stats Section -->
    <section class="stats-section">
        <div class="container">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="totalUsers">87.5K</div>
                    <div class="stat-label">Active Users</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalTransactions">2.1M</div>
                    <div class="stat-label">Transactions</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="successRate">99.8%</div>
                    <div class="stat-label">Success Rate</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">₦15.2B</div>
                    <div class="stat-label">Total Processed</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Blockchain Features -->
    <section class="blockchain-features" id="features">
        <div class="container">
            <div class="section-title">
                <h2>Why Choose Creda Chain?</h2>
                <p>Built on blockchain technology for unparalleled security and reliability</p>
            </div>
            
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h3>Blockchain Security</h3>
                    <p>Immutable transaction records prevent fraud, double spending, and failed payments with cryptographic verification.</p>
                    <div class="real-time-data">
                        <small>Network Status: <span id="networkStatus" class="loading">Checking</span></small>
                    </div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <h3>Lightning Fast</h3>
                    <p>Process thousands of transactions per second with our optimized blockchain architecture and smart contracts.</p>
                    <div class="real-time-data">
                        <small>Current TPS: <span id="currentTPS" class="loading">Calculating</span></small>
                    </div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-coins"></i>
                    </div>
                    <h3>Dual Currency Support</h3>
                    <p>Accept payments in Nigerian Naira and USDT cryptocurrency with automatic conversion and best rates.</p>
                    <div class="real-time-data">
                        <small>USDT Price: $<span id="usdtPrice" class="loading">1.00</span></small>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="cta" id="security">
        <div class="container">
            <h2>Ready to Experience Secure Payments?</h2>
            <p>Join thousands of businesses and individuals using Creda Chain for all their payment needs. Get started with our free tier today.</p>
            <div class="hero-buttons">
                <button id="ctaConnectBtn" class="btn btn-primary btn-lg">Connect Wallet</button>
                <a href="dashboard.html" class="btn btn-outline btn-lg">View Demo</a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>Creda Chain</h3>
                    <p>Building trust through blockchain technology for secure digital payments and verifiable transactions. Join thousands of satisfied users today.</p>
                    <div class="social-links">
                        <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                        <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="#" aria-label="Telegram"><i class="fab fa-telegram"></i></a>
                    </div>
                    <div class="contact-info">
                        <p><i class="fas fa-envelope"></i> support@credachain.com</p>
                        <p><i class="fas fa-phone"></i> +234 800 123 4567</p>
                    </div>
                </div>
                <div class="footer-column">
                    <h3>Services</h3>
                    <ul>
                        <li><a href="/pages/Airtime.html">Airtime Recharge</a></li>
                        <li><a href="/pages/Data.html">Data Recharge</a></li>
                        <li><a href="/pages/Utilities.html">Utilities Payment</a></li>
                        <li><a href="/pages/Transfer.html">Money Transfer</a></li>
                        <li><a href="/pages/convert.html">USDT to Naira</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Company</h3>
                    <ul>
                        <li><a href="#about">About Us</a></li>
                        <li><a href="#careers">Careers</a></li>
                        <li><a href="#blog">Blog</a></li>
                        <li><a href="#contact">Contact</a></li>
                        <li><a href="#partners">Partners</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Support</h3>
                    <ul>
                        <li><a href="#help">Help Center</a></li>
                        <li><a href="#security">Security</a></li>
                        <li><a href="#status">Status</a></li>
                        <li><a href="#privacy">Privacy Policy</a></li>
                        <li><a href="#terms">Terms of Service</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2025 Creda Chain. All rights reserved. | Blockchain-Powered Payment Solutions</p>
            </div>
        </div>
    </footer>

    <script>
        // Wallet Connection Logic
        let walletConnected = false;
        let currentWallet = null;
        let publicKey = null;

        // DOM Elements
        const connectWalletBtn = document.getElementById('connectWalletBtn');
        const walletContainer = document.getElementById('walletContainer');
        const walletModal = document.getElementById('walletModal');
        const closeModal = document.querySelector('.close-modal');
        const phantomOption = document.getElementById('phantomOption');
        const solflareOption = document.getElementById('solflareOption');
        const solletOption = document.getElementById('solletOption');
        const connectionStatus = document.getElementById('connectionStatus');
        const getStartedBtn = document.getElementById('getStartedBtn');
        const ctaConnectBtn = document.getElementById('ctaConnectBtn');

        // Event Listeners
        connectWalletBtn.addEventListener('click', openWalletModal);
        closeModal.addEventListener('click', closeWalletModal);
        getStartedBtn.addEventListener('click', openWalletModal);
        ctaConnectBtn.addEventListener('click', openWalletModal);
        
        // Close modal when clicking outside
        window.addEventListener('click', (event) => {
            if (event.target === walletModal) {
                closeWalletModal();
            }
        });

        // Wallet option click handlers
        phantomOption.addEventListener('click', () => connectWallet('phantom'));
        solflareOption.addEventListener('click', () => connectWallet('solflare'));
        solletOption.addEventListener('click', () => connectWallet('sollet'));

        // Functions
        function openWalletModal() {
            if (walletConnected) {
                // If already connected, show wallet actions
                toggleWalletActions();
            } else {
                walletModal.style.display = 'block';
            }
        }

        function closeWalletModal() {
            walletModal.style.display = 'none';
            connectionStatus.style.display = 'none';
        }

        function toggleWalletActions() {
            const walletActions = document.getElementById('walletActions');
            if (walletActions) {
                walletActions.classList.toggle('show');
            }
        }

        async function connectWallet(walletType) {
            // Show connecting status
            connectionStatus.style.display = 'block';
            
            try {
                let provider;
                
                // Check if the wallet is available
                switch(walletType) {
                    case 'phantom':
                        provider = window.solana || window.phantom?.solana;
                        if (!provider?.isPhantom) {
                            throw new Error('Phantom wallet not found');
                        }
                        break;
                    case 'solflare':
                        provider = window.solflare;
                        if (!provider) {
                            throw new Error('Solflare wallet not found');
                        }
                        break;
                    case 'sollet':
                        // Sollet is typically available via extension
                        provider = window.solana;
                        if (!provider) {
                            throw new Error('Sollet wallet not found');
                        }
                        break;
                    default:
                        throw new Error('Unknown wallet type');
                }
                
                // Connect to the wallet
                if (provider.connect) {
                    await provider.connect();
                } else if (provider.enable) {
                    await provider.enable();
                }
                
                // Get the public key
                publicKey = provider.publicKey;
                
                // Sign a message for authentication
                const message = `Welcome to Creda Chain! Please sign this message to verify your wallet ownership. Timestamp: ${Date.now()}`;
                const encodedMessage = new TextEncoder().encode(message);
                
                let signature;
                if (provider.signMessage) {
                    signature = await provider.signMessage(encodedMessage);
                } else {
                    // Fallback for wallets that might not have signMessage
                    const { signature: sig } = await provider.request({
                        method: 'signMessage',
                        params: {
                            message: encodedMessage,
                            display: 'utf8',
                        },
                    });
                    signature = sig;
                }
                
                // Store wallet connection info
                walletConnected = true;
                currentWallet = walletType;
                
                // Update UI
                updateWalletUI();
                
                // Close modal
                closeWalletModal();
                
                // Redirect to dashboard
                setTimeout(() => {
                    window.location.href = 'pages/dashboard.html';
                }, 1000);
                
            } catch (error) {
                console.error('Wallet connection error:', error);
                alert(`Failed to connect wallet: ${error.message}`);
                connectionStatus.style.display = 'none';
            }
        }

        function disconnectWallet() {
            walletConnected = false;
            currentWallet = null;
            publicKey = null;
            updateWalletUI();
            
            // Remove wallet actions
            const walletActions = document.getElementById('walletActions');
            if (walletActions) {
                walletActions.remove();
            }
        }

        function changeWallet() {
            disconnectWallet();
            openWalletModal();
        }

        function updateWalletUI() {
            if (walletConnected && publicKey) {
                // Format the wallet address for display
                const shortAddress = `${publicKey.toString().slice(0, 4)}...${publicKey.toString().slice(-4)}`;
                
                // Create wallet actions dropdown
                const walletActionsHTML = `
                    <div class="wallet-actions" id="walletActions">
                        <button id="changeWalletBtn">
                            <i class="fas fa-sync-alt"></i> Change Wallet
                        </button>
                        <button id="disconnectWalletBtn">
                            <i class="fas fa-sign-out-alt"></i> Disconnect
                        </button>
                    </div>
                `;
                
                // Update wallet container
                walletContainer.innerHTML = `
                    <div class="wallet-connected" id="walletConnected">
                        <div class="wallet-status"></div>
                        <div class="wallet-address">${shortAddress}</div>
                    </div>
                    ${walletActionsHTML}
                `;
                
                // Add event listeners to new elements
                document.getElementById('walletConnected').addEventListener('click', toggleWalletActions);
                document.getElementById('changeWalletBtn').addEventListener('click', changeWallet);
                document.getElementById('disconnectWalletBtn').addEventListener('click', disconnectWallet);
                
                // Close wallet actions when clicking elsewhere
                document.addEventListener('click', (e) => {
                    if (!e.target.closest('#walletContainer')) {
                        const walletActions = document.getElementById('walletActions');
                        if (walletActions) {
                            walletActions.classList.remove('show');
                        }
                    }
                });
            } else {
                walletContainer.innerHTML = `
                    <button id="connectWalletBtn" class="btn btn-primary">
                        <i class="fas fa-wallet"></i> Connect Wallet
                    </button>
                `;
                
                // Reattach event listener
                document.getElementById('connectWalletBtn').addEventListener('click', openWalletModal);
            }
        }

        // Check if a wallet is already connected on page load
        window.addEventListener('load', async () => {
            // Check for Phantom
            if (window.solana && window.solana.isPhantom && window.solana.isConnected) {
                try {
                    const response = await window.solana.connect({ onlyIfTrusted: true });
                    publicKey = response.publicKey;
                    walletConnected = true;
                    currentWallet = 'phantom';
                    updateWalletUI();
                } catch (error) {
                    // Wallet not previously connected, that's fine
                }
            }
            
            // You could add similar checks for other wallets here
        });

        // Real-time data fetching for homepage
        async function fetchHomepageData() {
            try {
                // Fetch exchange rates
                const exchangeResponse = await fetch('https://api.exchangerate-api.com/v4/latest/USD');
                const exchangeData = await exchangeResponse.json();
                
                // Update exchange rates
                const ngnRate = exchangeData.rates.NGN;
                const eurRate = exchangeData.rates.EUR;
                const gbpRate = exchangeData.rates.GBP;
                
                document.getElementById('exchangeRates').innerHTML = `
                    <div class="rate-item">
                        <span>USD/NGN:</span>
                        <span>₦${ngnRate.toFixed(2)}</span>
                    </div>
                    <div class="rate-item">
                        <span>USD/EUR:</span>
                        <span>€${eurRate.toFixed(2)}</span>
                    </div>
                    <div class="rate-item">
                        <span>USD/GBP:</span>
                        <span>£${gbpRate.toFixed(2)}</span>
                    </div>
                `;
                
                // Fetch cryptocurrency data
                const cryptoResponse = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=tether&vs_currencies=usd');
                const cryptoData = await cryptoResponse.json();
                
                // Update real-time metrics
                document.getElementById('usdtPrice').textContent = cryptoData.tether.usd.toFixed(4);
                document.getElementById('networkStatus').textContent = 'Operational';
                document.getElementById('currentTPS').textContent = (Math.floor(Math.random() * 5000) + 1000).toLocaleString();
                
                // Update stats with animation
                animateCounter('totalUsers', 87500);
                animateCounter('totalTransactions', 2100000);
                
                // Remove loading states
                document.querySelectorAll('.loading').forEach(el => {
                    el.classList.remove('loading');
                });
                
            } catch (error) {
                console.error('Error fetching homepage data:', error);
                // Fallback data
                document.getElementById('exchangeRates').innerHTML = `
                    <div class="rate-item">
                        <span>USD/NGN:</span>
                        <span>₦780.50</span>
                    </div>
                    <div class="rate-item">
                        <span>USD/EUR:</span>
                        <span>€0.92</span>
                    </div>
                    <div class="rate-item">
                        <span>USD/GBP:</span>
                        <span>£0.79</span>
                    </div>
                `;
                
                document.querySelectorAll('.loading').forEach(el => {
                    el.classList.remove('loading');
                    if (el.id === 'networkStatus') el.textContent = 'Operational';
                    if (el.id === 'currentTPS') el.textContent = '2,847';
                    if (el.id === 'usdtPrice') el.textContent = '1.000';
                });
                
                animateCounter('totalUsers', 87500);
                animateCounter('totalTransactions', 2100000);
            }
        }

        function animateCounter(elementId, finalValue) {
            const element = document.getElementById(elementId);
            const duration = 2000;
            const step = 20;
            const increment = finalValue / (duration / step);
            let current = 0;
            
            const timer = setInterval(() => {
                current += increment;
                if (current >= finalValue) {
                    element.textContent = finalValue.toLocaleString();
                    clearInterval(timer);
                } else {
                    element.textContent = Math.floor(current).toLocaleString();
                }
            }, step);
        }

        // Initialize homepage data
        document.addEventListener('DOMContentLoaded', function() {
            fetchHomepageData();
            
            // Update data every 30 seconds
            setInterval(fetchHomepageData, 30000);
            
            // Smooth scrolling for navigation links
            document.querySelectorAll('nav a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });
        });
    </script>
</body>
</html>